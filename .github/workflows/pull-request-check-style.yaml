permissions:
    contents: read
    pull-requests: write
    issues: write

name: PR check-style

on:
    pull_request:
        types: [ opened, edited, synchronize ]

jobs:
    check-style:
        runs-on: ubuntu-latest
        steps:
            -   name: Checkout
                uses: actions/checkout@ff7abcd0c3c05ccf6adc123a8cd1fd4fb30fb493 # v5.0.0

            -   name: Set up JDK 17
                uses: actions/setup-java@ae2b61dbc685e60e4427b2e8ed4f0135c6ea8597 # v4.7.1
                with:
                    java-version: '17'
                    distribution: 'corretto'
                    cache: gradle
            -   name: Setup Gradle
                uses: gradle/actions/setup-gradle@017a9ef # v4.4.2

            -   name: Gradle Caching
                uses: actions/cache@0400d5f644dc74513175e3cd8d07132dd4860809 # v4.2.1
                with:
                    path: |
                        ~/.gradle/caches
                        ~/.gradle/wrapper
                    key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
                    restore-keys: |
                        ${{ runner.os }}-gradle-

            -   name: Grant execute permission to gradlew
                run: chmod +x ./gradlew

            -   name: apply style
                run: ./gradlew  spotlessKotlinCheck
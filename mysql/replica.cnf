[mysqld]
# 서버 ID - Master와 달라야 함
server-id = 2

# Binary logging 활성화 (체인 레플리케이션을 위해)
log-bin = mysql-bin
binlog-format = ROW

# 레플리케이션할 데이터베이스 지정
binlog-do-db = prototype_reservation
replicate-do-db = prototype_reservation

# Relay log 설정
relay-log = mysql-relay-bin
relay-log-index = mysql-relay-bin.index

# Binary log 파일 보관 일수
expire-logs-days = 7

# Binary log 파일 최대 크기
max-binlog-size = 100M

# GTID 기반 레플리케이션 (권장)
gtid-mode = ON
enforce-gtid-consistency = ON

# 레플리케이션 설정
log-slave-updates = 1
slave-skip-errors = 1062

# 읽기 전용 모드 (선택사항)
read-only = 1
super-read-only = 1

# 성능 최적화
sync-binlog = 1
innodb-flush-log-at-trx-commit = 1

# 네트워크 타임아웃 설정
slave-net-timeout = 60

# 자동 레플리케이션 복구
master-info-repository = TABLE
relay-log-info-repository = TABLE
relay-log-recovery = ON